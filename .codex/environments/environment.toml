# THIS IS AUTOGENERATED. DO NOT EDIT MANUALLY
version = 1
name = "Renewo"

[setup]
script = ""

[setup.darwin]
script = '''
set -euo pipefail

# 1) Ensure Xcode CLI tools exist
xcode-select -p >/dev/null 2>&1 || xcode-select --install

# 2) Resolve Swift Package Manager dependencies (safe even if none)
# If your project has a workspace, adjust accordingly.
if [ -d ".git" ]; then
  echo "Repo detected"
fi

# Try to resolve packages for a common iOS structure:
# - If you have an .xcodeproj, this is enough
# - If you use a workspace, Codex tasks should specify it, but we can still resolve via xcodebuild later
echo "Resolving Swift packages (best effort)..."
xcodebuild -resolvePackageDependencies >/dev/null 2>&1 || true

# 3) Optional: install tooling if you actually use it (keep as no-op if not installed)
# SwiftLint / SwiftFormat via brew (only if brew exists and tools missing)
if command -v brew >/dev/null 2>&1; then
  command -v swiftlint >/dev/null 2>&1 || echo "swiftlint not installed (optional)"
  command -v swiftformat >/dev/null 2>&1 || echo "swiftformat not installed (optional)"
fi

echo "Setup complete."
'''

[[actions]]
name = "Run tests"
icon = "tool"
command = "xcodebuild -project Renewo.xcodeproj -scheme Renewo test -destination 'platform=iOS Simulator,name=iPhone 15'"

[[actions]]
name = "Resolve packages (explicit)"
icon = "tool"
command = "xcodebuild -resolvePackageDependencies"

[[actions]]
name = "SwiftLint"
icon = "tool"
command = "swiftlint"

[[actions]]
name = "SwiftFormat"
icon = "tool"
command = "swiftformat ."

[[actions]]
name = "Open in Xcode"
icon = "tool"
command = "open Renewo.xcodeproj"

[[actions]]
name = "Build (Debug)"
icon = "tool"
command = "xcodebuild -project Renewo.xcodeproj -scheme Renewo -configuration Debug build"
